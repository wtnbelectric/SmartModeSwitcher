# 📊 ダッシュボード仕様（フェーズ2拡張）

## 目的
- ルールを時間軸と場所に基づいて可視化し、ユーザーが「どのルールがいつ効くのか」を直感的に把握できるようにする。  
- 日付ごとにルールを切り替えて確認できる。

---

## 画面構成

### 1. カレンダー部
- `MaterialDatePicker` を利用して日付を選択
- デフォルトは「今日」
- 選択した日付に基づいてルールをフィルタリング

### 2. ガントチャート部
- X軸：その日の 0:00〜24:00
- Y軸：ルールごとに1行
- ルールの有効時間帯を横棒で描画
- 横棒の色やアイコンで通知形態を可視化
  - 🔊 通常＝青
  - 📳 バイブ＝オレンジ
  - 🔕 サイレント＝赤

### 3. ルール詳細
- ガントチャート上のルールをタップすると詳細情報を表示
- 表示方法は `BottomSheetDialog` または `DialogFragment`
- 内容：時間帯、モード、位置情報（緯度・経度・半径）

---

## 実装ポイント

### カレンダー
- MaterialDatePicker を利用
- 選択した日付を Room DB クエリに渡し、対象ルールを抽出

### ガントチャート
- 1日単位のため Canvas による自前描画がシンプルで効率的
- startTime, endTime をX軸の時間にマッピングして横棒描画

### 通知形態の可視化
- モードごとに色やアイコンを割り当て
- 視覚的に「どの時間がどのモードか」一目で分かる

### ルール詳細
- 軽量UI（ダイアログ）で詳細表示
- 編集はルール一覧画面から行う

## フェーズ2完了後に実現できること
- ルールに位置情報（緯度/経度/半径）を登録可能
- ダッシュボードで「日付を選び、その日のルールをガントチャートで確認」できる
- ルールの通知形態をアイコンと色で直感的に把握可能


# 🚦 フェーズ2 開発順序ガイドライン

## フェーズ2の目的
- **ルールに位置情報（緯度・経度・半径）を登録できるようにする**  
- **ダッシュボード画面を追加し、カレンダー＋ガントチャート形式でルールを可視化**  

---

## 開発ステップ

### Step 1. データ層の拡張
- Ruleエンティティは既に `latitude`, `longitude`, `radius` を保持している  
- DAO・Repository でこれらの項目も入出力可能にすることを確認  
- DBマイグレーション不要（既に設計済み）

---

### Step 2. UI層（ルール追加/編集画面の拡張）
- 緯度（数値入力）
- 経度（数値入力）
- 半径（数値入力）
- 入力が空なら null 保存、値があれば保存

---

### Step 3. ダッシュボード画面の追加
- ルール一覧画面に「ダッシュボード」ボタンを追加
- 新規画面 `DashboardActivity` / `DashboardFragment` を作成

---

### Step 4. カレンダーの導入
- `MaterialDatePicker` を導入し、日付選択を実装
- デフォルトは「今日」を選択
- 選択した日付で Room DB をクエリ → その日のルールを抽出

---

### Step 5. ガントチャート描画
- `CustomView` を作成し、Canvasでガントチャートを描画
  - X軸：0:00〜24:00
  - Y軸：ルールごとに1行
  - 横棒：startTime〜endTime
- 通知形態ごとに色分け
  - 🔊 通常＝青
  - 📳 バイブ＝オレンジ
  - 🔕 サイレント＝赤

---

### Step 6. ルール詳細表示
- ガントチャート上のバーをタップで `BottomSheetDialog` 表示
- 表示項目：時間帯、モード、位置情報（緯度/経度/半径）

---

### Step 7. テスト & チェック
- 新規ルール追加で位置情報が保存されるか
- 編集で位置情報が反映されるか
- ダッシュボードで選択日付のルールが正しく表示されるか
- ガントチャートにモード色が正しく出るか

---

## フェーズ2終了後の状態
- ルール追加/編集画面に **位置情報入力欄** がある  
- ダッシュボード画面で **カレンダーを選択 → その日のルールをガントチャートで表示**  
- ルールのモードを色とアイコンで直感的に把握可能  



## UI遷移（フェーズ2）

```mermaid
flowchart TD

    A[アプリ起動] --> B[ルール一覧画面]
    B --> |＋ボタン| C[ルール追加画面]
    B --> |ルールをタップ| D[ルール編集画面]
    B --> |ダッシュボード| E[ダッシュボード画面]

    E --> |カレンダーで日付選択| F[ガントチャート表示]
    F --> |ルールタップ| G[ルール詳細ポップアップ]

    C --> |保存| B
    C --> |キャンセル| B

    D --> |保存| B
    D --> |削除| B
    D --> |キャンセル| B

    E --> |戻る| B

